import{_ as B,c as l,o as a,r as T,e as k,g as x,h as S,a as e,F as y,i as v,f as E,w as F,j as f,t as r,k as g,n as I}from"#entry";import{g as j}from"./4SYaZ0Qu.js";const $={},M={class:"w-full h-max rounded-md bg-primary"};function N(o,n){return a(),l("div",M,[T(o.$slots,"default")])}const D=B($,[["render",N]]),P=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],U=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],C=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],Y=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],w=(o,n,c)=>{let d=o;return typeof n=="string"||Array.isArray(n)?d=o.toLocaleString(n,c):(n===!0||c!==void 0)&&(d=o.toLocaleString(void 0,c)),d};function p(o,n){if(!Number.isFinite(o))throw new TypeError(`Expected a finite number, got ${typeof o}: ${o}`);n={bits:!1,binary:!1,space:!0,...n};const c=n.bits?n.binary?Y:C:n.binary?U:P,d=n.space?" ":"";if(n.signed&&o===0)return` 0${d}${c[0]}`;const h=o<0,m=h?"-":n.signed?"+":"";h&&(o=-o);let i;if(n.minimumFractionDigits!==void 0&&(i={minimumFractionDigits:n.minimumFractionDigits}),n.maximumFractionDigits!==void 0&&(i={maximumFractionDigits:n.maximumFractionDigits,...i}),o<1){const u=w(o,n.locale,i);return m+u+d+c[0]}const t=Math.min(Math.floor(n.binary?Math.log(o)/Math.log(1024):Math.log10(o)/3),c.length-1);o/=(n.binary?1024:1e3)**t,i||(o=o.toPrecision(3));const _=w(Number(o),n.locale,i),s=c[t];return m+_+d+s}const b=globalThis.setInterval,L={class:"flex justify-center overflow-hidden"},G={class:"w-[80%] lg:w-[50%] flex justify-around flex-wrap gap-2 p-2"},R={class:"mx-5 my-2 grid grid-rows-3 gap-3 lg:grid-rows-none lg:grid-cols-3 font-bold"},Z={class:"w-full h-full"},A={key:0,class:"flex items-center justify-center lg:justify-start font-bold gap-3"},V={class:"text-3xl hidden lg:block"},z={class:"flex flex-col items-center lg:items-start"},K={class:"text-sm"},O={class:"text-xl"},q={class:"text-xs font-normal italic"},H={key:1,class:"w-full h-16 skeleton bg-primary flex justify-center items-center text-neutral-content"},J={class:"row-span-2 lg:col-span-2 flex flex-col justify-center items-center gap-5"},Q={key:0,class:"flex flex-col lg:flex-row lg:gap-5"},W={class:"flex gap-5"},X={class:"flex flex-col"},tt={key:0},st={class:"text-xs"},et=["value"],it={class:"flex flex-col"},nt={key:0},ot={class:"text-xs"},at=["value","max"],lt={class:"flex flex-col"},rt={key:0},ct={class:"text-xs"},dt={class:"text-sm"},ut={class:"flex flex-col"},ft={key:0},gt={class:"text-xs"},_t={class:"text-sm"},pt={class:"flex flex-col"},ht={key:0},mt={class:"text-xs"},xt=["value","max"],yt={key:0,class:"flex flex-wrap gap-1 lg:w-48 h-full justify-end px-1"},vt=["data-tip"],wt={key:1,class:"skeleton w-full h-16 bg-primary"},bt={key:0,class:"w-full flex justify-center badge badge-accent"},kt=k({__name:"uptime",setup(o){const n=x(2),c=x([{url:"id1.foolvpn.me",ping:[],info:{},status:{},speed:{},errors:[]},{url:"id2.foolvpn.me",ping:[],info:{},status:{},speed:{},errors:[]},{url:"sg1.foolvpn.me",ping:[],info:{},status:{},speed:{},errors:[]},{url:"sg2.foolvpn.me",ping:[],info:{},status:{},speed:{},errors:[]}]);async function d(i){try{const t=new Date().getTime(),_=await fetch(`https://${i}/api/v1/ping`),s=new Date().getTime();if(_.status==200)return{error:!1,result:s-t};throw new Error(_.statusText)}catch(t){return{error:!0,message:t.message}}}async function h(i){try{const t=await fetch(`https://${i}/api/v1/info`);if(t.status==200)return{error:!1,result:await t.json()};throw new Error(t.statusText)}catch(t){return{error:!0,message:t.message}}}async function m(i){try{const t=await fetch(`https://${i}/api/v1/status`);if(t.status==200)return{error:!1,result:await t.json()};throw new Error(t.statusText)}catch(t){return{error:!0,message:t.message}}}return S(async()=>{for(let i of c.value)h(i.url).then(t=>{if(t.error){i.errors.unshift(t.message);return}i.info=t.result}),b(()=>{for(const t of c.value)t.errors.length&&t.errors.pop()},5e3),b(async()=>{m(i.url).then(t=>{if(t.error){i.errors.unshift(t.message);return}i.speed.upload=t.result.nic[0].bytesSent-i.status.nic?.[0].bytesSent||0/n.value,i.speed.download=t.result.nic[0].bytesRecv-i.status.nic?.[0].bytesRecv||0/n.value,i.status=t.result}),d(i.url).then(t=>{t.error&&i.errors.unshift(t.message),i.ping.push({delay:t.result?t.result:0,date:new Date}),i.ping.length>22&&i.ping.shift()})},n.value*1e3)}),(i,t)=>{const _=D;return a(),l("div",L,[e("div",G,[(a(!0),l(y,null,v(g(c),s=>(a(),E(_,null,{default:F(()=>[e("div",R,[e("div",Z,[s.info.country&&s.status.host?(a(),l("div",A,[e("span",V,r(("getFlagEmoji"in i?i.getFlagEmoji:g(j))(s.info.country)),1),e("div",z,[e("span",K,r(s.info.country_name),1),e("span",O,r(s.info.org),1),e("span",q,r(s.status.host.os)+" "+r(s.status.host.platform)+" "+r(s.status.host.platformVersion),1)])])):(a(),l("div",H," Fetching "+r(s.url),1))]),e("div",J,[s.status.cpu?(a(),l("div",Q,[e("div",W,[e("div",X,[t[0]||(t[0]=e("div",null,"CPU",-1)),s.status.cpu?(a(),l("div",tt,[e("div",st,r(parseInt(s.status.cpu[0]).toFixed())+" %",1),e("div",null,[e("progress",{class:"progress progress-secondary w-12",value:parseInt(s.status.cpu[0]).toFixed(),max:"100"},null,8,et)])])):f("",!0)]),e("div",it,[t[1]||(t[1]=e("div",null,"RAM",-1)),s.status.mem?(a(),l("div",nt,[e("div",ot,r(g(p)(s.status.mem.used)),1),e("div",null,[e("progress",{class:"progress progress-secondary w-12",value:s.status.mem.used,max:s.status.mem.total},null,8,at)])])):f("",!0)]),e("div",lt,[t[2]||(t[2]=e("div",null,"Upload",-1)),s.speed.upload&&s.status.nic?(a(),l("div",rt,[e("div",ct,r(g(p)(s.speed.upload)),1),e("div",dt,r(g(p)(s.status.nic[0].bytesSent)),1)])):f("",!0)]),e("div",ut,[t[3]||(t[3]=e("div",null,"Download",-1)),s.speed.download&&s.status.nic?(a(),l("div",ft,[e("div",gt,r(g(p)(s.speed.download)),1),e("div",_t,r(g(p)(s.status.nic[0].bytesRecv)),1)])):f("",!0)]),e("div",pt,[t[4]||(t[4]=e("div",null,"Ping",-1)),s.ping.length>0?(a(),l("div",ht,[e("div",mt,r(s.ping[s.ping.length-1].delay)+" ms",1),e("div",null,[e("progress",{class:"progress progress-secondary w-12",value:s.ping.filter(u=>u.delay>0).length,max:s.ping.length},null,8,xt)])])):f("",!0)])]),s.ping.length>0?(a(),l("div",yt,[(a(!0),l(y,null,v(s.ping,u=>(a(),l("div",{class:"tooltip","data-tip":`${u.delay} ms (${u.date})`},[e("div",{class:I(["badge badge-xs",u.delay>0?"badge-secondary":"badge-accent"])},null,2)],8,vt))),256))])):f("",!0)])):(a(),l("div",wt))])]),s.errors.length?(a(),l("div",bt,r(s.errors[0]),1)):f("",!0)]),_:2},1024))),256))])])}}});export{kt as default};
